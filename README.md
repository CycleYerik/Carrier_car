# 智能物流搬运小车
本项目是中国大学生工程实践与创新能力大赛中“智能+”赛道的智能物流搬运赛项。  
Collaborators:[CY](https://github.com/CycleYerik)

## Contents
<!-- - [CCC_crazy_carrier_car](./CCC_crazy_carrier_car): 项目的主程序代码工程，基于CubeMX生成，使用HAL库函数和Keil5
    - [car_control](./CCC_crazy_carrier_car/car_control): 小车的运动控制、机械臂控制等进行功能实现和封装
    - [screen](./CCC_crazy_carrier_car/screen): 显示屏驱动和显示函数，便于调试
    - [sensor](./CCC_crazy_carrier_car/sensor): 传感器驱动和数据处理
    - [servo](./CCC_crazy_carrier_car/servo): 机械臂舵机相关驱动
    - [motor](./CCC_crazy_carrier_car/motor): 步进电机相关驱动
    - [Core](./CCC_crazy_carrier_car/Core): 主程序代码main.c所在
    - 其余文件夹和文件为CubeMX生成的相关工程文件
- [OpenCV](./OpenCV): 项目的图像处理代码工程，基于树莓派，使用OpenCV -->




## 使用

### 注意事项  
1. 本项目使用的主控为STM32F103Vet6，使用CubeMX生成工程，使用Keil5进行编译和烧录。自己建立工程进行调试时相对应的时钟配置等可参考本工程
2. 项目将各个模块分开管理，各自调试好驱动，实现功能，给出函数的调用接口或者封装好的功能函数，在主程序中直接调用，这样便于各自模块的调试和管理，最后的main函数里也调用的都是封装好的功能函数，这样代码逻辑也较为清晰。同时建议在各个文件夹中完善README.md文件，给出各个模块的使用方法和接口，说清楚各个函数的作用和参数，而不是就一个.c和.h文件。
3. 各个模块最好能在模块文件中就实现了各种配置和初始化，而不是还要在cubeMX中进行配置（当然基本的一些外设也可以在cubemx中配置。
4. keil编译工程时可能出现中文注释变成乱码的问题，建议自行上网查找解决方法(修改编译时的编码)或者干脆用英文注释，但是务必保证用英语能够清晰表达。
5. 注意keil的main函数中代码要写在user code begin和user code end之间，不要写在其他地方，否则重新生成代码时会被覆盖。
6. 添加了新的.c和.h文件后，需要在keil工程中添加相应的文件，否则编译时会报错（具体如何添加去网上找教程）

## 进度
2024.10.8
- 实现了串口屏、树莓派的通信和返回数据的初步处理
- 实现了电机的控制，但是底盘控制仍然有问题

## 任务和要求（目前和长远）

### 近期任务
- 底盘的移动控制。最为要紧，在没有陀螺仪辅助的情况下能不能实现稳定的直线移动、原地选择
- 视觉的识别，能做到识别二维码、圆心等
- 视觉和主控的通信。能传输视觉识别的数据
- 视觉与底盘的协调。能根据视觉识别的数据调整底盘的运动
- 机械臂的设计。组装好，并且能实现所需的运动
- 舵机的控制。能够控制机械臂的运动 
- 优化PCB板设计。保证功率电路的稳定，优化各个模块的连接方式，减小板子的体积，加入STM32的开关等

### 长远任务和功能要求


#### 运动控制
- 引入PID控制，实现直线与旋转的功能
- 借助陀螺仪等传感器，实现行驶校正
- 做到稳定的旋转（如原地旋转90°）
- 实现给定路径的开环控制行驶


#### 视觉
- 跑一个简单的深度学习，加强颜色识别的效果和速度
- 借助视觉对小车直线行驶进行辅助校正

#### 机械臂
- 在往届小车的基础上进行优化，使其更加稳定，避免机械臂摆动造成的漂移

#### 整车结构设计
- 尽量减小体积
- 优化各种连接件的设计，避免松动、折断等情况

#### 供电和电源管理
- PCB完善设计，保证大功率长时间运行的安全性，保证各种供电的稳定性

## 碎碎念
1. 别问为什么用keil和CubeMX而不用CubeIDE这种明显更现代的平台，问就是祖宗之法不可变。
2. 改程序尽量注释而不是直接删掉，防止改完后忘了原来的情况
3. 调车经验之谈：上电前务必三思，防止烧器件、忘了调参、忘了关电源等等；不要与一个问题或者故障死磕太久，防止陷入死胡同；最好不要一个人调。